<script>
const music = document.getElementById("music");
const startBox = document.getElementById("startBox");
const messageBox = document.getElementById("messageBox");

const startTime = 5;
const endTime = 225;
let score = 0;
let interval;

function startGame(){
  startBox.remove();
  messageBox.style.display = "block";

  music.currentTime = startTime;
  music.play().catch(()=>alert("TarayÄ±cÄ± sesi engelledi"));

  interval = setInterval(createHeart, 1400);

  music.ontimeupdate = () => {
    if(music.currentTime >= endTime){
      music.pause();
      clearInterval(interval);
      finalMessage();
    }
  };
}

function createHeart(){
  const heart = document.createElement("div");
  heart.className = "heart";
  heart.innerHTML = "â¤ï¸";
  heart.style.left = Math.random()*90 + "vw";
  heart.style.bottom = "-30px";

  heart.onclick = () => {
    score++;
    heart.innerHTML = "âœ¨";
    setTimeout(()=>heart.remove(),200);
    messageBox.innerHTML = `
      <h2>Melis ğŸ’–</h2>
      <p>Kalp toplandÄ±: <b>${score}</b></p>
      <p>Her biri sana olan hislerimden biri.</p>
    `;
  };

  document.body.appendChild(heart);
  setTimeout(()=>heart.remove(),8000);
}

function finalMessage(){
  messageBox.innerHTML = `
    <h2>Melisâ€¦</h2>
    <p>
      ÅarkÄ± bitti ama kalbim bitmedi.<br><br>
      TopladÄ±ÄŸÄ±n ${score} kalp,<br>
      sana olan hislerimin sadece kÃ¼Ã§Ã¼k bir kÄ±smÄ±.
    </p>
  `;
}
</script>
